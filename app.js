class l{constructor(){this.obj={minusBtns:document.querySelectorAll(".quantity__button.--minus"),plusBtns:document.querySelectorAll(".quantity__button.--plus")},this.getMinus(),this.getPlus()}getMinus(){this.obj.minusBtns.length>0&&this.obj.minusBtns.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const e=t.nextElementSibling,i=Number(e.value);let n=e.getAttribute("step"),r=Number(e.getAttribute("min"));n=typeof n<"u"?Number(n):1,i>r&&(e.value=i-n)})})}getPlus(){this.obj.plusBtns.length>0&&this.obj.plusBtns.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const e=t.previousElementSibling,i=Number(e.value);let n=e.getAttribute("step"),r=Number(e.getAttribute("max"));n=typeof n<"u"?Number(n):1,i<r&&(e.value=i+n)})})}}class o{constructor(t){this.threshold=20,this.startX=0,this.oldX=0,this.position=0,this.snapPosition=0,this.isDrag=!1,this.userDragged=!1,this.slider=t,this.obj={items:this.slider.querySelectorAll(".products__item")},this.setDimensions(),this.bindHandlers()}setDimensions(){const s=this.slider.offsetWidth,e=this.obj.items[0].offsetWidth,i=this.obj.items.length*e;this.itemWidth=e,this.maxAllowedW=s<i?s-i-64:0}calculateBoundaries(t,s=!0){const e=s?this.itemWidth/4:0;return t>e?e:t<this.maxAllowedW-e?this.maxAllowedW-e:t}calculateSnapPosition(t,s){let e=(~~(t/this.itemWidth)-s)*this.itemWidth;return e<this.maxAllowedW&&(e=this.maxAllowedW),e}mapToRange(t,s,e,i,n){return(t-s)*(n-i)/(e-s+i)}handleTouchStart(t){t.touches.length>1||this.handleStart(t)}handleMouseStart(t){t.preventDefault(),this.handleStart(t)}handleStart(t){this.isDrag=!0,this.userDragged=!1,this.position=this.snapPosition,this.startX=(t.pageX||t.touches[0].pageX)-this.slider.offsetLeft,this.slider.classList.add("--active")}handleTouchMove(t){t.touches.length>1||this.handleMove(t)}handleMouseMove(t){t.preventDefault(),this.handleMove(t)}handleMove(t){if(!this.isDrag)return;const e=(t.pageX||t.touches[0].pageX)-this.slider.offsetLeft,i=e-this.startX;if(Math.abs(i)<this.threshold)return;const n=this.oldX-e<0?0:1,r=this.mapToRange(Math.abs(i),this.threshold,window.innerWidth,1,3),h=this.calculateBoundaries(this.position+i*r);t.preventDefault(),this.userDragged=!0,this.snapPosition=this.calculateSnapPosition(h,n),this.oldX=e,this.slider.setAttribute("style",`transform: translate3d(${h}px, 0, 0)`)}handleEnd(){this.isDrag=!1,this.slider.classList.remove("--active"),this.slider.setAttribute("style",`transform: translate3d(${this.snapPosition}px, 0, 0)`)}handleResize(){this.setDimensions()}handleClick(t){this.userDragged&&(t.preventDefault(),this.userDragged=!1)}bindHandlers(){this.slider.addEventListener("touchstart",t=>this.handleTouchStart(t)),this.slider.addEventListener("touchmove",t=>this.handleTouchMove(t)),this.slider.addEventListener("touchend",t=>this.handleEnd(t)),this.slider.addEventListener("mousedown",t=>this.handleMouseStart(t)),this.slider.addEventListener("mousemove",t=>this.handleMouseMove(t)),this.slider.addEventListener("mouseup",t=>this.handleEnd(t)),this.slider.addEventListener("mouseleave",t=>this.handleEnd(t)),this.slider.addEventListener("click",t=>this.handleClick(t)),window.addEventListener("resize",()=>this.handleResize())}}class d{constructor(){new l,document.querySelectorAll(".products__list").forEach(s=>{new o(s)})}}document.addEventListener("DOMContentLoaded",()=>{new d});
